(window.webpackJsonp=window.webpackJsonp||[]).push([["admin"],{1:function(e,t){},Osb3:function(e,t,s){},QH54:function(e,t,s){var n,r;void 0===(r="function"==typeof(n=function(){return{init:function(){}}})?n.call(t,s,t,e):n)||(e.exports=r)},QcuZ:function(e,t,s){"use strict";s.r(t);var n=s("oCYn"),r=s("KN3F"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("vue-admin",{attrs:{"navbar-header":"Server Authentications"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-6"},[s("list-filter",{attrs:{items:e.servers,selection:e.visibleServers,labels:{headline:"headline"},fields:{name:"Name"}},on:{"update-selection":e.update}})],1),e._v(" "),s("div",{staticClass:"col-xs-12 col-md-6"},[s("list-filter",{attrs:{items:e.userKeys,selection:e.visibleUserKeys,labels:{headline:"headline"},fields:{comment:"Kommentar"},"search-field":"comment"},on:{"update-selection":e.update}})],1)]),e._v(" "),e._l(e.visibleServers,function(t){return s("div",{staticClass:"box"},[s("server-key-mapping",{key:e.renderKey,attrs:{server:t,"user-keys":e.visibleUserKeys},on:{update:e.updateData}})],1)})],2)};i._withStripped=!0;var a=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"vue-admin"}},[t("content-header",{attrs:{"navbar-header":this.navbarHeader}}),this._v(" "),t("section",{staticClass:"content"},[this._t("default")],2)],1)};a._withStripped=!0;var o=function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"content-header"},[t("div",{staticClass:"sticky-wrapper"},[t("nav",{staticClass:"navbar navbar-default",attrs:{role:"navigation"}},[t("div",{staticClass:"container-fluid"},[this.navbarHeader?t("div",{staticClass:"navbar-header"},[t("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[this._v(this._s(this.navbarHeader))])]):this._e()])])])])};o._withStripped=!0;var c={props:["navbarHeader"]},u=s("KHd+"),l=Object(u.a)(c,o,[],!1,null,null,null);l.options.__file="vendor/mindbase/vuejs-bundle/Resources/assets/js/vue/components/ContentHeader.vue";var d={components:{ContentHeader:l.exports},props:["navbarHeader"]},h=Object(u.a)(d,a,[],!1,null,null,null);h.options.__file="vendor/mindbase/vuejs-bundle/Resources/assets/js/vue/Admin.vue";var v=h.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box"},[s("div",{staticClass:"box-header"},[s("h3",{staticClass:"box-title"},[e._v(e._s(e.labels.headline))]),e._v(" "),s("div",{staticClass:"box-tools"},[s("div",{staticClass:"input-group input-group-sm",staticStyle:{width:"150px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchPattern,expression:"searchPattern"}],staticClass:"form-control pull-right",attrs:{type:"text",name:"table_search",placeholder:"Suche"},domProps:{value:e.searchPattern},on:{input:function(t){t.target.composing||(e.searchPattern=t.target.value)}}}),e._v(" "),e._m(0)])])]),e._v(" "),s("div",{staticClass:"box-body table-responsive no-padding"},[s("table",{staticClass:"table table-hover"},[s("tbody",[s("tr",e._l(e.fieldHeaders,function(t){return s("th",[e._v(e._s(t))])}),0),e._v(" "),e._l(e.items,function(t,n){return s("tr",{directives:[{name:"show",rawName:"v-show",value:e.matchesSearchPattern(t),expression:"matchesSearchPattern(item)"}]},[e._l(e.getFieldValues(t),function(t){return s("td",[e._v(e._s(t))])}),e._v(" "),s("td",[s("a",{staticClass:"btn btn-xs btn-default ba-btn-checkbox",on:{click:function(s){return e.toggleSelection(n,t)}}},[e.isSelected(n)?s("span",[s("i",{staticClass:"fa fa-check"})]):s("span",[e._v(" ")])])])],2)})],2)])])])};p._withStripped=!0;var f={props:{labels:Object,items:{type:Object,required:!0},selection:{type:Object,required:!0},fields:{type:Object,required:!0},searchField:{type:String,required:!1,default:"name"}},data:function(){return{searchPattern:""}},methods:{getSearchString:function(e){var t,s=this.searchField;return e.hasOwnProperty(s)&&null!==(t=e[s])&&void 0!==t?t:""},matchesSearchPattern:function(e){return this.searchPattern.length<=0||this.getSearchString(e).includes(this.searchPattern)},toggleSelection:function(e,t){this.isSelected(e)?delete this.selection[e]:this.selection[e]=t,this.$forceUpdate(),this.$emit("update-selection")},isSelected:function(e){var t;return null!==(null!==(t=this.selection[e])&&void 0!==t?t:null)},getFieldValues:function(e){var t={};for(var s in this.fields){var n;if(this.fields.hasOwnProperty(s))t[s]=null!==(n=e[s])&&void 0!==n?n:""}return t}},computed:{fieldHeaders:function(){var e=[];for(var t in this.fields)this.fields.hasOwnProperty(t)&&e.push(this.fields[t]);return e.push(""),e}}},b=(s("glNr"),Object(u.a)(f,p,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"submit"}},[t("i",{staticClass:"fa fa-search"})])])}],!1,null,"20be2469",null));b.options.__file="vendor/brainappeal/ssh-key-management-bundle/Resources/assets/js/vue/components/ListFilter.vue";var y=b.exports,m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"box-header"},[s("h3",{staticClass:"box-title"},[e._v(e._s(e.server.name))])]),e._v(" "),s("div",{staticClass:"box-body table-responsive no-padding"},[s("table",{staticClass:"table table-header-rotated table-striped table-hover table-striped-column"},[s("thead",[s("tr",[s("th",[e._v("User")]),e._v(" "),s("th",[e._v("Authentication")]),e._v(" "),s("th",[e._v("Letzte Synchronisation")]),e._v(" "),s("th",[e._v("Nächste Synchronisation")]),e._v(" "),e._l(e.userKeys,function(t){return s("th",{staticClass:"rotate-45"},[s("div",[s("span",[e._v(e._s(t.comment))])])])})],2)]),e._v(" "),s("tbody",e._l(e.server.serverAuthentications,function(t){return s("tr",[s("td",[s("a",{attrs:{href:"ssh://"+t.username+"@"+e.server.host}},[e._v(e._s(t.username)+"@"+e._s(e.server.host))])]),e._v(" "),s("td",[s("span",{class:e.getPasswordStateClass(t),attrs:{title:e.getPasswordStateMessage(t)}},[e._v("Passwort")]),e._v(" \n                "),s("span",{class:e.getKeyStateClass(t),attrs:{title:e.getKeyStateMessage(t)}},[e._v("Privater Key")]),e._v(" \n            ")]),e._v(" "),s("td",[s("span",[e._v(e._s(e.formatDate(t.lastSynchronization)))]),e._v(" "),t.lastSynchronizationErrorMessage?s("i",{staticClass:"fa fa-exclamation-triangle",attrs:{"aria-hidden":"true",title:t.lastSynchronizationErrorMessage}}):e._e()]),e._v(" "),s("td",[s("span",[e._v(e._s(e.formatDate(t.nextSynchronization)))])]),e._v(" "),e._l(e.userKeys,function(n){return s("td",[!0===e.getKeyState(t,n)?s("a",{staticClass:"btn btn-xs btn-success",on:{click:function(s){return e.toggleAuthentication(t,n)}}},[s("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})]):!1===e.getKeyState(t,n)?s("a",{staticClass:"btn btn-xs btn-danger",on:{click:function(s){return e.toggleAuthentication(t,n)}}},[s("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]):s("span",{staticClass:"btn btn-xs"},[s("i",{staticClass:"fa fa-spinner fa-spin",attrs:{"aria-hidden":"true"}})])])})],2)}),0)])])])};m._withStripped=!0;var g=s("vDqi"),_=s.n(g);function S(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var K=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"service",void 0),w(this,"requestInterceptor",void 0),w(this,"responseInterceptor",void 0),w(this,"mockAdapter",void 0),this.service=_.a.create({baseURL:Object({NODE_ENV:"production"}).API_URL||"",headers:{"X-Requested-With":"XMLHttpRequest"}})}var t,s,n;return t=e,(s=[{key:"addRequestInterceptor",value:function(e){this.requestInterceptor=e,this.service.interceptors.request.use(this.requestInterceptor)}},{key:"addResponseInterceptor",value:function(e){this.responseInterceptor=e,this.service.interceptors.response.use(void 0,this.responseInterceptor)}},{key:"get",value:function(e){return this.service.get(e)}},{key:"delete",value:function(e){return this.service.delete(e)}},{key:"post",value:function(e,t){return this.service.request({method:"POST",url:e,responseType:"json",data:t})}},{key:"put",value:function(e,t){return this.service.request({method:"PUT",url:e,responseType:"json",data:t})}},{key:"patch",value:function(e,t,s){return this.service.request({method:"PATCH",url:e,responseType:"json",data:t})}}])&&S(t.prototype,s),n&&S(t,n),e}());var C={props:{server:{type:Object,required:!0},userKeys:{type:Object,required:!0}},data:function(){return{pending:[]}},methods:{getPasswordStateClass:function(e){return"label label-"+e.passwordState},getPasswordStateMessage:function(e){switch(e.passwordState){case"warning":return"Kein Passwort im System hinterlegt.";case"success":return"Passwort im System hinterlegt";default:return""}},getKeyStateClass:function(e){return"label label-"+e.keyState},getKeyStateMessage:function(e){switch(e.keyState){case"danger":return"Kein Schlüssel im System hinterlegt.";case"warning":return"Statischer Schlüssel im System hinterlegt.";case"success":return"Schlüssel wird vollständig vom System verwaltet";default:return""}},toggleAuthentication:function(e,t){var s,n;this.setPending(e,t,!0),(s=e.id,n=t.id,new Promise(function(e,t){K.post("?method=toggle",{serverAuthenticationId:s,userKeyId:n}).then(function(t){return e(t.data)}).catch(t)})).finally(function(){this.$emit("update")}.bind(this))},formatDate:function(e){return new Date(e).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},getKeyState:function(e,t){var s,n;return null!==(s=(null!==(n=this.keyStateMatrix[e.id])&&void 0!==n?n:{})[t.id])&&void 0!==s?s:null},setPending:function(e,t,s){s?this.pending.push(e.id+"/"+t.id):this.pending.splice(this.pending.indexOf(e.id+"/"+t.id),1),this.$forceUpdate()},isPending:function(e,t){return this.pending.includes(e.id+"/"+t.id)}},computed:{keyStateMatrix:function(){var e={},t=this.userKeys,s=this.server.serverAuthentications;for(var n in s)if(s.hasOwnProperty(n)){var r=s[n];for(var i in e[r.id]={},t)if(t.hasOwnProperty(i)&&(e[r.id][t[i].id]=null,!this.isPending(r,t[i])))for(var a in e[r.id][t[i].id]=!1,r.userKeys)if(r.userKeys.hasOwnProperty(a)&&r.userKeys[a].id===t[i].id){e[r.id][t[i].id]=!0;break}}return e}},watch:{key:function(){this.pending=[]}}},P=(s("i/wm"),Object(u.a)(C,m,[],!1,null,"5e272985",null));P.options.__file="vendor/brainappeal/ssh-key-management-bundle/Resources/assets/js/vue/components/ServerKeyMapping.vue";var O=P.exports,k=s("LvDl"),x=s.n(k),j={components:{ServerKeyMapping:O,"vue-admin":v,"list-filter":y},props:["dataAuthentications","dataUserKeys"],data:function(){return{servers:{},visibleServers:{},userKeys:{},visibleUserKeys:{},renderKey:0}},methods:{update:function(){this.$forceUpdate(),this.renderKey+=1},updateData:function(){x.a.debounce(function(e){new Promise(function(e,t){K.get("?method=getKeyStateMatrix").then(function(t){return e(t.data)}).catch(t)}).then(function(t){for(var s in e.servers=Object.assign({},JSON.parse(t.authentications)),e.userKeys=Object.assign({},JSON.parse(t.user_keys)),this.visibleServers)e.visibleServers.hasOwnProperty(s)&&e.servers.hasOwnProperty(s)&&(e.visibleServers[s]=e.servers[s]);for(var n in this.visibleUserKeys)e.visibleUserKeys.hasOwnProperty(n)&&e.userKeys.hasOwnProperty(n)&&(e.visibleUserKeys[n]=e.userKeys[n]);e.update()}.bind(e))},500)(this)}},computed:{},mounted:function(){for(var e in this.servers=Object.assign({},JSON.parse(this.dataAuthentications)),this.servers)this.servers.hasOwnProperty(e)&&(this.visibleServers[e]=this.servers[e]);for(var t in this.userKeys=Object.assign({},JSON.parse(this.dataUserKeys)),this.userKeys)this.userKeys.hasOwnProperty(t)&&(this.visibleUserKeys[t]=this.userKeys[t])}},A=Object(u.a)(j,i,[],!1,null,"27e0b753",null);A.options.__file="vendor/brainappeal/ssh-key-management-bundle/Resources/assets/js/vue/Authorization.vue";var q=A.exports;n.a.use(r.a);var U=document.getElementById("ba-ssh-key-management-authorization-app");new n.a({render:function(e){return e(q,{props:{dataAuthentications:U.getAttribute("data-authentications"),dataUserKeys:U.getAttribute("data-user-keys")}})}}).$mount("#"+U.id)},Vgqp:function(e,t,s){},glNr:function(e,t,s){"use strict";var n=s("Osb3");s.n(n).a},"i/wm":function(e,t,s){"use strict";var n=s("Vgqp");s.n(n).a},"iA/y":function(e,t,s){s.e(0).then(function(){s("LSZE"),s("ls82")}).catch(s.oe),s("lQ0a"),s("QH54").init(),s("kFxm").initBrainappealSshKeyManagement()},kFxm:function(e,t,s){var n,r;void 0===(r="function"==typeof(n=function(){return{initBrainappealSshKeyManagement:function(){null!==document.getElementById("ba-ssh-key-management-authorization-app")&&s("QcuZ")}}})?n.call(t,s,t,e):n)||(e.exports=r)},lQ0a:function(e,t,s){}},[["iA/y","runtime",1]]]);